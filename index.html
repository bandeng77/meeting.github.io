<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meeting Scheduler Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBWD1l0RXGWMG7hFc9uGsjlZkOW_0Job2k",
      authDomain: "meetingefk.firebaseapp.com",
      databaseURL: "https://meetingefk-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "meetingefk",
      storageBucket: "meetingefk.firebasestorage.app",
      messagingSenderId: "664314278395",
      appId: "1:664314278395:web:5eac88372b15c6170b1b5e"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  <!-- Style (tetap sama seperti sebelumnya) -->
  <style>
    .calendar-day { transition: all 0.2s ease; }
    .calendar-day:hover:not(.disabled) { background-color: #EFF6FF; cursor: pointer; }
    .calendar-day.selected { background-color: #3B82F6; color: white; }
    .calendar-day.has-meetings { position: relative; }
    .calendar-day.has-meetings::after {
      content: ''; position: absolute; bottom: 4px; left: 50%;
      transform: translateX(-50%); width: 6px; height: 6px;
      border-radius: 50%; background-color: #3B82F6;
    }
    .calendar-day.selected.has-meetings::after { background-color: white; }
    .time-slot:hover:not(.booked) { background-color: #EFF6FF; cursor: pointer; }
    .time-slot.selected { background-color: #3B82F6; color: white; }
    .meeting-card { transition: all 0.2s ease; }
    .meeting-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- ... HTML UTAMA TETAP SAMA ... -->

<script>
  const availableTimes = ['09:00', '10:00', '11:00', '13:00', '14:00', '15:00', '16:00'];
  let meetingsData = {};

  async function fetchMeetings() {
    const snapshot = await db.ref('meetings').once('value');
    const data = snapshot.val();
    meetingsData = {};
    if (data) {
      Object.values(data).forEach(meeting => {
        if (!meetingsData[meeting.date]) meetingsData[meeting.date] = [];
        meetingsData[meeting.date].push(meeting);
      });
    }
    renderCalendar(currentMonth, currentYear);
    if (selectedDate) {
      const dateString = formatDate(selectedDate);
      updateMeetingsList(dateString);
      updateTimeSlots();
    }
  }

  bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    if (!selectedDate || !selectedTime) {
      alert('Please select a date and time');
      return;
    }
    const title = document.getElementById('title').value;
    const participants = document.getElementById('participants').value
      .split(',').map(p => p.trim()).filter(p => p);
    const description = document.getElementById('description').value;
    const dateString = formatDate(selectedDate);
    const newMeeting = {
      id: Date.now(),
      title,
      time: selectedTime,
      participants,
      description,
      date: dateString
    };
    await db.ref('meetings').push(newMeeting);
    alert('Meeting scheduled successfully!');
    bookingForm.reset();
    selectedTime = null;
    bookingTimeInput.value = '';
    await fetchMeetings();
  });

  function initCalendar() {
    fetchMeetings();
  }

  initCalendar();
</script>

</body>
</html>
